<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>J-Scanner PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
html,body{margin:0;height:100%}
body{
  background:#020617;color:#e5e7eb;font-family:'Inter',sans-serif;
  overflow:hidden;display:flex;justify-content:center;align-items:center
}
/* ===== DNA CANVAS BACKGROUND ===== */
#dna{position:fixed;inset:0;z-index:-2}
.glow{position:fixed;inset:-20%;z-index:-3;
  background:radial-gradient(40% 30% at 20% 10%,#22d3ee22,transparent 60%),
             radial-gradient(40% 30% at 80% 30%,#6366f133,transparent 60%),
             radial-gradient(30% 30% at 50% 80%,#a855f733,transparent 60%);
  filter:blur(60px)
}
/* ===== CARD ===== */
.card{
  width:460px;max-width:92vw;padding:34px;border-radius:26px;
  background:rgba(2,6,23,.82);
  box-shadow:0 0 70px rgba(99,102,241,.35), inset 0 0 24px rgba(34,211,238,.12);
  backdrop-filter:blur(16px);
  animation:pop .9s ease
}
@keyframes pop{from{opacity:0;transform:scale(.92)}to{opacity:1;transform:scale(1)}}
h1{font-family:'Orbitron',sans-serif;text-align:center;margin:0;letter-spacing:3px}
.badge{text-align:center;margin-top:6px;font-size:12px;color:#22d3ee;letter-spacing:2px}
input{
  width:100%;margin-top:28px;padding:14px 16px;border-radius:16px;
  border:1px solid #1e293b;background:#020617;color:#e5e7eb;font-size:14px
}
button{
  width:100%;margin-top:18px;padding:14px;border-radius:16px;border:none;cursor:pointer;
  background:linear-gradient(135deg,#6366f1,#22d3ee,#a855f7);background-size:200%;
  color:#020617;font-weight:800;letter-spacing:.6px;animation:gradient 4s infinite alternate
}
@keyframes gradient{0%{background-position:0%}100%{background-position:100%}}
button:hover{transform:translateY(-1px) scale(1.01)}
.result{text-align:center;margin-top:26px}
.score{font-family:'Orbitron',sans-serif;font-size:46px}
.status{margin-top:6px;font-weight:700}
.risk{margin-top:14px;height:14px;border-radius:10px;background:#020617;overflow:hidden}
.fill{height:100%;width:0;transition:width .9s cubic-bezier(.2,.8,.2,1)}
footer{text-align:center;margin-top:22px;font-size:11px;opacity:.45}
/* ===== MUSIC TOGGLE ===== */
.music{
  position:absolute;right:16px;top:16px;display:flex;gap:8px;align-items:center
}
.music button{
  width:auto;margin:0;padding:8px 12px;border-radius:999px;font-weight:700
}
</style>
</head>
<body>
<canvas id="dna"></canvas>
<div class="glow"></div>

<div class="music">
  <span style="font-size:12px;opacity:.7">Ambient</span>
  <button id="musicBtn">PLAY</button>
</div>

<div class="card">
  <h1>J-SCANNER</h1>
  <div class="badge">PRO • DNA INTEL</div>

  <input id="url" placeholder="https://example.com" />
  <button onclick="scan()">▶ START SCAN</button>

  <div class="result" id="result"></div>
  <footer>Elite Threat Intelligence</footer>
</div>

<!-- Ambient music (royalty-free placeholder) -->
<audio id="bgm" loop preload="none">
  <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_4b2c1f8d6f.mp3?filename=dark-ambient-124734.mp3" type="audio/mpeg">
</audio>

<script>
// ===== API =====
const API="https://empty-waterfall-3803.selambenjiji.workers.dev";
async function scan(){
  const url=document.getElementById('url').value.trim();
  const r=document.getElementById('result');
  if(!/^https?:\/\//i.test(url)){r.innerHTML='<div class="status" style="color:#facc15">Enter valid http(s) URL</div>';return}
  r.innerHTML='<div>Initializing scan…</div>';
  const res=await fetch(API,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url})});
  const d=await res.json();
  const bad=(d.malicious||0)+(d.suspicious||0);
  const total=bad+(d.harmless||0)+(d.undetected||0);
  const p=Math.round((bad/Math.max(1,total))*100);
  const color=bad===0?'#22c55e':bad<3?'#facc15':'#ef4444';
  r.innerHTML=`<div class="score">${bad}/${total}</div><div class="status" style="color:${color}">${bad===0?'CLEAN':'RISK DETECTED'}</div><div class="risk"><div class="fill" style="width:${p}%;background:${color}"></div></div>`;
}

// ===== MUSIC TOGGLE (user interaction required) =====
const bgm=document.getElementById('bgm');
const btn=document.getElementById('musicBtn');
let playing=false;
btn.onclick=()=>{ if(!playing){ bgm.volume=.35; bgm.play(); btn.textContent='PAUSE'; } else { bgm.pause(); btn.textContent='PLAY'; } playing=!playing; };

// ===== DNA CANVAS =====
const c=document.getElementById('dna');
const ctx=c.getContext('2d');
let w,h,t=0;
function resize(){w=c.width=window.innerWidth;h=c.height=window.innerHeight}
window.addEventListener('resize',resize);resize();
function draw(){
  ctx.clearRect(0,0,w,h);
  const cx=w/2; const amp=Math.min(w,h)*0.18; const step=10;
  for(let y=0;y<h;y+=step){
    const a=(y*0.02)+t;
    const x1=cx+Math.sin(a)*amp;
    const x2=cx+Math.sin(a+Math.PI)*amp;
    const g=ctx.createLinearGradient(x1,y,x2,y);
    g.addColorStop(0,'rgba(34,211,238,.7)'); g.addColorStop(1,'rgba(168,85,247,.7)');
    ctx.strokeStyle=g; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(x1,y); ctx.lineTo(x2,y); ctx.stroke();
    ctx.fillStyle='rgba(255,255,255,.7)'; ctx.beginPath(); ctx.arc(x1,y,2.2,0,Math.PI*2); ctx.fill(); ctx.beginPath(); ctx.arc(x2,y,2.2,0,Math.PI*2); ctx.fill();
  }
  t+=0.02; requestAnimationFrame(draw);
}
draw();
</script>
</body>
</html>
